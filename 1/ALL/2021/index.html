<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Aleksiej Ostrowski</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Aleksiej Ostrowski. Personal webpage">
 
    <link id="theme-style" rel="stylesheet" href="../../../static/blog/assets/css/theme-2.css">
    <link rel="stylesheet" href="../../../static/css/blog.css%3Fv=4.css">

    <link rel="stylesheet"  href="../../../static/highlight/default.min.css">

    <link rel="apple-touch-icon" sizes="180x180" href="../../../static/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../../static/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../../static/images/favicon-16x16.png">
    <link rel="manifest" href="../../../static/site.webmanifest">

</head> 

<body>
    
    <header class="header text-center">	    
	    <h1 class="blog-name pt-lg-4 mb-0"><a href="index.html#">Aleksiej's Blog</a></h1>
        
	    <nav class="navbar navbar-expand-lg navbar-dark" >
           
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
			</button>

			<div id="navigation" class="collapse navbar-collapse flex-column" >
				<div class="profile-section pt-3 pt-lg-0">
				    <img class="profile-image mb-3 rounded-circle mx-auto" src="../../../static/images/profile.png" alt="image" >			
					
					<div class="bio mb-3">Hi, my name is Aleksiej Ostrowski. I am a software developer with a Ph.D. degree in sociology. 
						
					<!-- <br><a href="about.html">Find out more about me</a> -->
				
				    </div><!--//bio-->
					<ul class="social-list list-inline py-3 mx-auto">
			            <li class="list-inline-item"><a href="https://twitter.com/_aleksiej_"><i class="fab fa-twitter fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="https://www.linkedin.com/in/ostrowski-aleksiej/"><i class="fab fa-linkedin-in fa-fw"></i></a></li>
						<li class="list-inline-item"><a href="https://github.com/aleksiej-ostrowski"><i class="fab fa-github-alt fa-fw"></i></a></li>
						<!-- <li class="list-inline-item"><a href="#"><i class="fab fa-envelope-open-text fa-fw"></i></a></li> -->
			        </ul><!--//social-list-->
			        <hr> 
				</div><!--//profile-section-->
				
				<ul class="navbar-nav flex-column text-left">
					<li class="nav-item">
					    <a class="nav-link" href="../../../resume/index.html"><i class="fas fa-user fa-fw mr-2"></i>Resume</a>
					</li>
					<li class="nav-item active">
					    <a class="nav-link" href="../../../blog/index.html"><i class="fas fa-home fa-fw mr-2"></i>Blog</a>
					</li>

                    

				</ul>
				
				<div class="my-2 my-md-3">
				    <a class="btn btn-primary" href="mailto:aleksiej.ostrowski@gmail.com?subject=Letter from the blog page https://aleksiej.com&body=Hi, Aleksiej," target="_blank">Send me a message</a>
				</div>

			</div>
		</nav>
    </header>
    
    <div class="main-wrapper">
	    <section class="cta-section theme-bg-light py-5">
		    <div class="container text-center">
			    <h2 class="heading">Blog</h2>
                <div class="intro">Welcome to my blog about programming, machine learning, philosophy, and sociology.<br/><a href="../../../cloud/index.html">Tag cloud</a>&nbsp;&nbsp;<a href="../../../words/index.html">All words</a></div>

                <!--
			    <form class="signup-form form-inline justify-content-center pt-3" action="http://127.0.0.1:9000/blog/" method="post" onsubmit="return not_empty();">
                    <div class="form-group">
                        <input id="pattern" name="pattern" class="form-control mr-md-1" placeholder="" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Search</button>
                </form>
                -->

		    </div><!--//container-->
		</section>
		
	    <section class="blog-list px-3 py-5 p-md-5">
		    <div class="container">

                <div class="item mb-5">
    <div class="media">
        <div class="media-body">
            <h3 class="title mb-1"><a href="../../../id/MAPRXp7WNbyH/index.html">Fancy Sequence</a></h3>
            <div class="meta mb-1"><span><a href="../../golang/index.html">golang</a></span><span><a href="../../leetcode/index.html">leetcode</a></span></div>
            
            <div class="intro">
            
            <br/> <img src="../../../static/images/fancy.png" alt="" class="img-thumbnail">
            
                <pre>                       
                <code class="go">
 
 /*

#-------------------------------------------------------------#
#                                                             #
#  version 0.0.2                                              #
#  https://leetcode.com/problems/fancy-sequence/              #
#                                                             #
#  Aleksiej Ostrowski, 2021                                   #
#                                                             #
#  https://aleksiej.com                                       #
#                                                             #
#-------------------------------------------------------------#   

*/

package main

import (
    "fmt"
    "os"
)

const crt = 84467440737095516 // max(uint64) = 8446744073709551615
const md  = 1000000007

type Oper struct {
    o int8
    v int8
    h int32
}

type Fancy struct {
    arr []int8
    opr []Oper
    cas map[int]int
}

func Constructor() Fancy {
    return Fancy{}
}

func (this *Fancy) Append(val int)  {
    this.arr = append(this.arr, int8(val))
}


func printList(l Fancy) {

    for _, v := range l.arr {

        fmt.Print(v, " ")
    }

    fmt.Println()
}

func (this *Fancy) AddAll(inc int)  {

    this.opr = append(this.opr, Oper{-2, int8(inc), int32(len(this.arr))})
    this.cas = make(map[int]int)

    /*

    for k := range this.cas {
        delete(this.cas, k)
    }

    */
}

func (this *Fancy) MultAll(m int)  {

    this.opr = append(this.opr, Oper{-1, int8(m), int32(len(this.arr))})
    this.cas = make(map[int]int)

    /*

    for k := range this.cas {
        delete(this.cas, k)
    }

    */
}


func (this *Fancy) GetIndex(idx int) int {

    if idx < 0 || idx >= len(this.arr) {
        return -1
    }

    if val, ok := this.cas[idx]; ok {
        return val
    }

    var vv uint64

    vv = uint64(this.arr[idx])
    
    for _, v := range this.opr {

        if idx >= int(v.h) {
            continue
        }

        switch os := v.o; os {
        case -2:
            vv += uint64(v.v)
        case -1:
            vv *= uint64(v.v)
        }

         if vv > crt {
            vv = vv % md
        }    
    }

    if vv > md {
        vv = vv % md
    }    

    if this.cas == nil {
        this.cas = make(map[int]int)
    }

    this.cas[idx] = int(vv)
    
    return int(vv)
}

func main () {

    obj := Constructor()

    obj.Append(2)
    obj.Append(4)
    obj.Append(1)
    obj.Append(6)

    printList(obj)

    obj.AddAll(9)
    obj.AddAll(1)
    obj.MultAll(2)

    fmt.Println(obj.GetIndex(0))

    os.Exit(1)

    obj.MultAll(9)
    obj.AddAll(2)
    fmt.Println(obj.GetIndex(3))
    obj.Append(7)
    obj.Append(5)
    obj.Append(3)
    obj.AddAll(4)
    obj.MultAll(5)
    obj.AddAll(4)
    fmt.Println(obj.GetIndex(1))
}
               

               </code>
                </pre>
                
                
            </div>
            
        </div><!--//media-body-->
    </div><!--//media-->
    <hr/> 
</div><!--//item-->

<nav aria-label="Page navigation example"><ul class="pagination pagination-sm mt-3"><li class="page-item active"><a class="page-link" href="index.html#">1</a></li></ul></nav>

		    </div>
	    </section>
	    
	    <footer class="footer text-center py-2 theme-bg-dark">
		   
	        <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
            <small class="copyright">Designed with <i class="fas fa-heart" style="color: #fb866a;"></i> by <a href="http://themes.3rdwavemedia.com" target="_blank">Xiaoying Riley</a> for developers</small>
		   
	    </footer>
    
    </div><!--//main-wrapper-->
    
    <!-- Javascript -->          
    <script src="../../../static/blog/assets/plugins/jquery-3.4.1.min.js"></script>
    <script src="../../../static/blog/assets/plugins/popper.min.js"></script> 
    <script src="../../../static/blog/assets/plugins/bootstrap/js/bootstrap.min.js"></script> 
    <script src="../../../static/js/blog.js%3Fv=4"></script> 

    <script src="../../../static/highlight/highlight.min.js"></script>
    <!-- <script charset="UTF-8" src="static/highlight/cpp.min.js"></script> -->
    <script src="../../../static/js/jquery.mark.min.js"></script>

    <!-- FontAwesome JS-->
	<script defer src="../../../static/blog/assets/fontawesome/js/all.min.js"></script>

    <script>hljs.initHighlightingOnLoad();</script>

    <script>

    $(function() {
        $("body").mark("2021");
    });

    </script>    

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-177864421-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-177864421-1');
    </script>

 </body>
</html> 

